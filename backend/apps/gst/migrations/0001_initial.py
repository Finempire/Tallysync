# Generated by Django 5.2.9 on 2025-12-08 16:40

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('companies', '0001_initial'),
        ('vouchers', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='EInvoice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('doc_type', models.CharField(choices=[('INV', 'Invoice'), ('CRN', 'Credit Note'), ('DBN', 'Debit Note')], max_length=10)),
                ('doc_number', models.CharField(max_length=50)),
                ('doc_date', models.DateField()),
                ('seller_gstin', models.CharField(max_length=15)),
                ('seller_name', models.CharField(max_length=200)),
                ('seller_address', models.TextField()),
                ('seller_state_code', models.CharField(max_length=2)),
                ('buyer_gstin', models.CharField(blank=True, max_length=15)),
                ('buyer_name', models.CharField(max_length=200)),
                ('buyer_address', models.TextField()),
                ('buyer_state_code', models.CharField(max_length=2)),
                ('buyer_pos', models.CharField(max_length=2)),
                ('taxable_value', models.DecimalField(decimal_places=2, max_digits=18)),
                ('cgst_amount', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('sgst_amount', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('igst_amount', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('cess_amount', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('total_invoice_value', models.DecimalField(decimal_places=2, max_digits=18)),
                ('irn', models.CharField(blank=True, max_length=100)),
                ('ack_number', models.CharField(blank=True, max_length=50)),
                ('ack_date', models.DateTimeField(blank=True, null=True)),
                ('signed_invoice', models.TextField(blank=True)),
                ('signed_qr_code', models.TextField(blank=True)),
                ('qr_code_image', models.ImageField(blank=True, upload_to='einvoice_qr/%Y/%m/')),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('pending', 'Pending'), ('generated', 'Generated'), ('cancelled', 'Cancelled'), ('failed', 'Failed')], default='draft', max_length=20)),
                ('error_message', models.TextField(blank=True)),
                ('cancel_reason', models.TextField(blank=True)),
                ('cancelled_at', models.DateTimeField(blank=True, null=True)),
                ('request_json', models.JSONField(default=dict)),
                ('response_json', models.JSONField(default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='einvoices', to='companies.company')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('voucher', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='vouchers.voucher')),
            ],
            options={
                'unique_together': {('company', 'doc_type', 'doc_number')},
            },
        ),
        migrations.CreateModel(
            name='EInvoiceItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('sl_no', models.IntegerField()),
                ('product_name', models.CharField(max_length=300)),
                ('hsn_code', models.CharField(max_length=8)),
                ('quantity', models.DecimalField(decimal_places=3, default=1, max_digits=18)),
                ('unit', models.CharField(default='NOS', max_length=10)),
                ('unit_price', models.DecimalField(decimal_places=2, max_digits=18)),
                ('discount', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('taxable_value', models.DecimalField(decimal_places=2, max_digits=18)),
                ('gst_rate', models.DecimalField(decimal_places=2, max_digits=5)),
                ('cgst_amount', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('sgst_amount', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('igst_amount', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=18)),
                ('einvoice', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='gst.einvoice')),
            ],
        ),
        migrations.CreateModel(
            name='EWayBill',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('doc_type', models.CharField(max_length=10)),
                ('doc_number', models.CharField(max_length=50)),
                ('doc_date', models.DateField()),
                ('supply_type', models.CharField(max_length=20)),
                ('sub_supply_type', models.CharField(max_length=50)),
                ('transaction_type', models.CharField(max_length=10)),
                ('total_value', models.DecimalField(decimal_places=2, max_digits=18)),
                ('cgst', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('sgst', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('igst', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('transporter_id', models.CharField(blank=True, max_length=15)),
                ('transporter_name', models.CharField(blank=True, max_length=200)),
                ('transport_mode', models.CharField(choices=[('1', 'Road'), ('2', 'Rail'), ('3', 'Air'), ('4', 'Ship')], max_length=10)),
                ('vehicle_number', models.CharField(blank=True, max_length=20)),
                ('vehicle_type', models.CharField(blank=True, max_length=10)),
                ('transport_doc_number', models.CharField(blank=True, max_length=50)),
                ('transport_doc_date', models.DateField(blank=True, null=True)),
                ('from_gstin', models.CharField(max_length=15)),
                ('from_address', models.TextField()),
                ('from_pincode', models.CharField(max_length=6)),
                ('from_state_code', models.CharField(max_length=2)),
                ('to_gstin', models.CharField(blank=True, max_length=15)),
                ('to_address', models.TextField()),
                ('to_pincode', models.CharField(max_length=6)),
                ('to_state_code', models.CharField(max_length=2)),
                ('ewb_number', models.CharField(blank=True, max_length=20)),
                ('ewb_date', models.DateTimeField(blank=True, null=True)),
                ('ewb_valid_till', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('generated', 'Generated'), ('cancelled', 'Cancelled'), ('expired', 'Expired'), ('extended', 'Extended')], default='draft', max_length=20)),
                ('cancel_reason', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='eway_bills', to='companies.company')),
                ('einvoice', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='gst.einvoice')),
                ('voucher', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='vouchers.voucher')),
            ],
        ),
        migrations.CreateModel(
            name='GSTCredential',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('gstin', models.CharField(max_length=15)),
                ('gsp_provider', models.CharField(choices=[('cleartax', 'ClearTax'), ('masters_india', 'Masters India'), ('nic', 'NIC Direct')], max_length=50)),
                ('username', models.CharField(max_length=100)),
                ('encrypted_password', models.TextField()),
                ('auth_token', models.TextField(blank=True)),
                ('token_expiry', models.DateTimeField(blank=True, null=True)),
                ('sandbox_mode', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('company', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='gst_credentials', to='companies.company')),
            ],
        ),
        migrations.CreateModel(
            name='GSTR2BRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('period', models.CharField(max_length=7)),
                ('supplier_gstin', models.CharField(max_length=15)),
                ('supplier_name', models.CharField(blank=True, max_length=200)),
                ('invoice_number', models.CharField(max_length=50)),
                ('invoice_date', models.DateField()),
                ('invoice_type', models.CharField(max_length=10)),
                ('taxable_value', models.DecimalField(decimal_places=2, max_digits=18)),
                ('igst', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('cgst', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('sgst', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('cess', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('itc_available', models.BooleanField(default=True)),
                ('status', models.CharField(default='pending', max_length=20)),
                ('downloaded_at', models.DateTimeField(auto_now_add=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='gstr2b_records', to='companies.company')),
            ],
        ),
        migrations.CreateModel(
            name='ReconciliationResult',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('period', models.CharField(max_length=7)),
                ('match_type', models.CharField(choices=[('exact', 'Exact Match'), ('suggested', 'Suggested Match'), ('missing_2b', 'Missing in GSTR-2B'), ('missing_pr', 'Missing in Purchase Register'), ('mismatch', 'Value Mismatch')], max_length=20)),
                ('mismatch_reasons', models.JSONField(default=list)),
                ('action_taken', models.CharField(blank=True, max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='companies.company')),
                ('gstr2b_record', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='gst.gstr2brecord')),
                ('purchase_voucher', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='vouchers.voucher')),
            ],
        ),
        migrations.CreateModel(
            name='GSTR1Data',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('period', models.CharField(max_length=7)),
                ('return_type', models.CharField(choices=[('b2b', 'B2B'), ('b2cl', 'B2C Large'), ('b2cs', 'B2C Small'), ('cdnr', 'Credit/Debit Notes'), ('exp', 'Exports'), ('nil', 'Nil Rated'), ('hsn', 'HSN Summary'), ('doc', 'Document Summary')], max_length=10)),
                ('data', models.JSONField(default=list)),
                ('status', models.CharField(default='draft', max_length=20)),
                ('filed_at', models.DateTimeField(blank=True, null=True)),
                ('arn', models.CharField(blank=True, max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='gstr1_data', to='companies.company')),
            ],
            options={
                'unique_together': {('company', 'period', 'return_type')},
            },
        ),
        migrations.CreateModel(
            name='GSTR3BData',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('period', models.CharField(max_length=7)),
                ('outward_taxable_supplies', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('outward_zero_rated', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('outward_nil_exempt', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('outward_non_gst', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('itc_igst', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('itc_cgst', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('itc_sgst', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('itc_cess', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('igst_liability', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('cgst_liability', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('sgst_liability', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('cess_liability', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('igst_payable', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('cgst_payable', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('sgst_payable', models.DecimalField(decimal_places=2, default=0, max_digits=18)),
                ('status', models.CharField(default='draft', max_length=20)),
                ('filed_at', models.DateTimeField(blank=True, null=True)),
                ('arn', models.CharField(blank=True, max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='gstr3b_data', to='companies.company')),
            ],
            options={
                'unique_together': {('company', 'period')},
            },
        ),
    ]
